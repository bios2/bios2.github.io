<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>Introduction to Shiny Apps</title>

  <meta property="description" itemprop="description" content="Shiny is so great."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-06-22"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-06-22"/>
  <meta name="article:author" content="Katherine Hébert"/>
  <meta name="article:author" content="Andrew MacDonald"/>
  <meta name="article:author" content="Jake Lawlor"/>
  <meta name="article:author" content="Vincent Bellevance"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Introduction to Shiny Apps"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Shiny is so great."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Introduction to Shiny Apps"/>
  <meta property="twitter:description" content="Shiny is so great."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","draft"]}},"value":[{"type":"character","attributes":{},"value":["Introduction to Shiny Apps"]},{"type":"character","attributes":{},"value":["Shiny is so great.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Katherine Hébert"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Andrew MacDonald"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Jake Lawlor"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Vincent Bellevance"]}]}]},{"type":"character","attributes":{},"value":["06-22-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"logical","attributes":{},"value":[false]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["Capture d’écran, le 2021-06-23 à 05.25.32.png","Capture d’écran, le 2021-06-23 à 05.58.08.png","Capture d’écran, le 2021-06-23 à 06.25.38.png","images/add_elements_diagram.png","images/app-ids.png","images/app-in1.png","images/app-in2.png","images/app-output.png","images/app-reactiveid.png","images/darklytheme.png","images/plotOutput.png","images/populated_shiny.png","images/shiny_dashboard_layout.png","images/thematic_plot.png","images/thematic.png","introduction-to-shiny-apps_files/anchor-4.2.2/anchor.min.js","introduction-to-shiny-apps_files/bowser-1.9.3/bowser.min.js","introduction-to-shiny-apps_files/distill-2.2.21/template.v2.js","introduction-to-shiny-apps_files/header-attrs-2.10/header-attrs.js","introduction-to-shiny-apps_files/header-attrs-2.7/header-attrs.js","introduction-to-shiny-apps_files/header-attrs-2.8/header-attrs.js","introduction-to-shiny-apps_files/jquery-1.11.3/jquery.min.js","introduction-to-shiny-apps_files/popper-2.6.0/popper.min.js","introduction-to-shiny-apps_files/tippy-6.2.7/tippy-bundle.umd.min.js","introduction-to-shiny-apps_files/tippy-6.2.7/tippy-light-border.css","introduction-to-shiny-apps_files/tippy-6.2.7/tippy.css","introduction-to-shiny-apps_files/tippy-6.2.7/tippy.umd.min.js","introduction-to-shiny-apps_files/webcomponents-2.0.0/webcomponents.js","libs/header-attrs-2.10/header-attrs.js","libs/remark-css-0.0.1/default-fonts.css","libs/remark-css-0.0.1/default.css"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="introduction-to-shiny-apps_files/header-attrs-2.10/header-attrs.js"></script>
  <script src="introduction-to-shiny-apps_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="introduction-to-shiny-apps_files/popper-2.6.0/popper.min.js"></script>
  <link href="introduction-to-shiny-apps_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="introduction-to-shiny-apps_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="introduction-to-shiny-apps_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="introduction-to-shiny-apps_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="introduction-to-shiny-apps_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="introduction-to-shiny-apps_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="introduction-to-shiny-apps_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Introduction to Shiny Apps","description":"Shiny is so great.","authors":[{"author":"Katherine Hébert","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""},{"author":"Andrew MacDonald","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""},{"author":"Jake Lawlor","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""},{"author":"Vincent Bellevance","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-06-22T00:00:00.000+00:00","citationText":"Hébert, et al., 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Introduction to Shiny Apps</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Shiny is so great.</p></p>
</div>

<div class="d-byline">
  Katherine Hébert  
  
,   Andrew MacDonald  
  
,   Jake Lawlor  
  
,   Vincent Bellevance  
  
<br/>06-22-2021
</div>

<div class="d-article">
<h2 id="plots">Plots</h2>
<p>Shiny is an excellent tool for visual exploration - it is at its most useful when a user can <em>see</em> something change before their eyes according to some selections. This is a great way to allow users to explore a dataset, explore the results of some analyses according to different parameters, and so on!</p>
<p>Let’s now add a plot to our Shiny app, to visualize the distribution of a variable depending on user input. We’ll be adding the <code>ggplot2</code> and <code>ggridges</code> packages in the set-up step at the top of our <code>app.R</code> to allow us to make a plot.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># load packages</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://shiny.rstudio.com'>shiny</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://wilkelab.org/ggridges'>ggridges</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/krlmlr/here'>here</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://readr.tidyverse.org'>readr</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="user-interface">User interface</h3>
<p>To add a plot in our Shiny, we need to indicate where the plot should appear in the app. We can do this with <code>plotOutput()</code>, a similar function to <code>tableOutput()</code> in the previous section that is meant for plot outputs, as the name suggests.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Define UI for application that makes a table andplots the Volcano Explosivity </span>
<span class='co'># Index for the most eruptive volcanoes within a selected range of years</span>

<span class='va'>ui</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html'>fluidPage</a></span><span class='op'>(</span>
  
  <span class='co'># Application title ----</span>
  
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/titlePanel.html'>titlePanel</a></span><span class='op'>(</span><span class='st'>"Exploring volcano explosivity"</span><span class='op'>)</span>,
  
  <span class='co'># Input interface ----</span>
  
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>sidebarLayout</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>sidebarPanel</a></span><span class='op'>(</span>
      
      <span class='co'># Sidebar with a slider range input</span>
      <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sliderInput.html'>sliderInput</a></span><span class='op'>(</span><span class='st'>"years"</span>, <span class='co'># the id your server needs to use the selected value</span>
                  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/builder.html'>h3</a></span><span class='op'>(</span><span class='st'>"Years"</span><span class='op'>)</span>,
                  min <span class='op'>=</span> <span class='fl'>1900</span>, max <span class='op'>=</span> <span class='fl'>2020</span>, <span class='co'># maximum range that can be selected</span>
                  value <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2010</span>, <span class='fl'>2020</span><span class='op'>)</span> <span class='co'># this is the default slider position</span>
      <span class='op'>)</span>
    <span class='op'>)</span>
  <span class='op'>)</span>,
  
  <span class='co'># Show the outputs from the server ---------------</span>
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>mainPanel</a></span><span class='op'>(</span>
    
    <span class='co'># Show a ridgeplot of explosivity index for selected volcanoes</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/plotOutput.html'>plotOutput</a></span><span class='op'>(</span><span class='st'>"ridgePlot"</span><span class='op'>)</span>,
    
    <span class='co'># then, show the table we made in the previous step</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/tableOutput.html'>tableOutput</a></span><span class='op'>(</span><span class='st'>"erupt_table"</span><span class='op'>)</span>
    
  <span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Now our Shiny app knows where we want to place our plot.</p>
<h3 id="server">Server</h3>
<p>We now need to create the plot we want to show in our app. This plot will change depending on one or several reactive values that the user can input or select in our UI.</p>
<p>We link the UI and server together with IDs that are assigned to each object. Above, we told the UI to expect a plot output with the ID <code>"ridgePlot"</code>. In the server, we will create a plot and render it as a plot object using <code>renderPlot()</code>, and we will assign this plot output to the ID we call in the UI (as <code>output$ridgePlot</code>).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Define server logic required to make your output(s)</span>
<span class='va'>server</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>output</span><span class='op'>)</span> <span class='op'>{</span>

  
  <span class='co'># prepare the data</span>
  <span class='co'># ----------------------------------------------------------</span>
  
  <span class='co'># read the dataset</span>
  <span class='va'>eruptions</span> <span class='op'>&lt;-</span> <span class='fu'>readr</span><span class='fu'>::</span><span class='fu'><a href='https://readr.tidyverse.org/reference/read_rds.html'>read_rds</a></span><span class='op'>(</span><span class='fu'>here</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/here/man/here.html'>here</a></span><span class='op'>(</span><span class='st'>"data"</span>, <span class='st'>"eruptions.rds"</span><span class='op'>)</span><span class='op'>)</span>
  
  <span class='co'># filter the dataset to avoid overloading the plot </span>
  <span class='va'>eruptions</span> <span class='op'>&lt;-</span> <span class='va'>eruptions</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>eruptions</span><span class='op'>$</span><span class='va'>volcano_name</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>eruptions</span><span class='op'>$</span><span class='va'>volcano_name</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>30</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,<span class='op'>]</span>
  <span class='co'># this subsets to volcanoes that have erupted more than 30 times</span>
  
  
  <span class='co'># make reactive dataset</span>
  <span class='co'># ----------------------------------------------------------</span>
  
  <span class='co'># subset volcano data with input year range</span>
  <span class='va'>eruptions_filtered</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/reactive.html'>reactive</a></span><span class='op'>(</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>eruptions</span>, <span class='va'>start_year</span> <span class='op'>&gt;=</span> <span class='va'>input</span><span class='op'>$</span><span class='va'>years</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>&amp;</span> <span class='va'>end_year</span> <span class='op'>&lt;=</span> <span class='va'>input</span><span class='op'>$</span><span class='va'>years</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>
  <span class='op'>}</span><span class='op'>)</span>
  
    
  <span class='co'># create and render the outputs</span>
  <span class='co'># ----------------------------------------------------------</span>
  
  <span class='co'># create the table of volcanoes</span>
  <span class='va'>output</span><span class='op'>$</span><span class='va'>erupt_table</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/renderTable.html'>renderTable</a></span><span class='op'>(</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>eruptions_filtered</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span><span class='op'>)</span>
  
  <span class='co'># render the plot output</span>
  <span class='va'>output</span><span class='op'>$</span><span class='va'>ridgePlot</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/renderPlot.html'>renderPlot</a></span><span class='op'>(</span><span class='op'>{</span>
    
    <span class='co'># create the plot</span>
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'>eruptions_filtered</span><span class='op'>(</span><span class='op'>)</span>,
           <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>vei</span>,
               y <span class='op'>=</span> <span class='va'>volcano_name</span>,
               fill <span class='op'>=</span> <span class='va'>volcano_name</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
      <span class='co'># we are using a ridgeplot geom here, from the ggridges package</span>
      <span class='fu'><a href='https://wilkelab.org/ggridges/reference/geom_density_ridges.html'>geom_density_ridges</a></span><span class='op'>(</span> size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># line width</span>
      
      <span class='co'># label the axes</span>
      <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Volcano Explosivity Index"</span>, y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
      
      <span class='co'># adjust the ggplot theme to make the plot "prettier"</span>
      <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_classic</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
      <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span>,
            axis.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>12</span>, face <span class='op'>=</span> <span class='st'>"bold"</span><span class='op'>)</span>,
            axis.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>14</span>, face <span class='op'>=</span> <span class='st'>"bold"</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<h3 id="the-shiny-app">The Shiny app</h3>
<p>Now, if we run the Shiny app, we have a plot above the table we made previously. They are positioned in this way because the <code>plotOutput()</code> comes before the <code>tableOutput()</code> in the UI.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Run the application</span>
<span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html'>shinyApp</a></span><span class='op'>(</span>ui <span class='op'>=</span> <span class='va'>ui</span>, server <span class='op'>=</span> <span class='va'>server</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="images/plotOutput.png" /></p>
<h2 id="review-how-a-shiny-app-works">Review: How a Shiny app works</h2>
<h3 id="building-blocks">Building blocks</h3>
<p>We’ve now seen the basic building blocks of a Shiny app:</p>
<ul>
<li>The <strong>user interface</strong>, which determines how the app “looks”. This is how we tell Shiny where to ask for user inputs, and where to put any outputs we create.</li>
<li><strong>Reactive values</strong>, which are values that change according to user inputs. These are values that affect the outputs we create in the Shiny app, such as tables or plots.</li>
<li>The <strong>server</strong>, where we use reactive values to generate some outputs.</li>
</ul>
<h3 id="ids">IDs</h3>
<p>The <strong>user interface</strong> and <strong>server</strong> communicate through IDs that we assign to inputs from the user and outputs from the server.</p>
<p><img src="images/app-ids.png" /></p>
<p>We use an ID (<em>in orange</em>) to link the user input in the UI to the reactive values used in the server:</p>
<p><img src="images/app-reactiveid.png" /></p>
<p>We use another ID (<em>in blue</em>) to link the output created in the server to the output shown in the user interface:</p>
<p><img src="images/app-output.png" /></p>
<h3 id="organisation">Organisation</h3>
<p>These elements can all be placed in one script named <code>app.R</code> or separately in scripts named <code>ui.R</code> and <code>server.R</code>. The choice is up to you, although it becomes easier to work in separate <code>ui.R</code> and <code>server.R</code> scripts when the Shiny app becomes more complex.</p>
<p><strong>Example 1: Everything in <code>app.R</code></strong></p>
<p><img src="images/app-in1.png" /> <strong>Example 2: Split things into <code>ui.R</code> and <code>server.R</code></strong></p>
<p><img src="images/app-in2.png" /></p>
<h2 id="customising-the-theme">Customising the theme</h2>
<p>If you’d like to go one step further, you can also customize the appearance of your Shiny app using built-in themes, or creating your own themes.</p>
<h3 id="using-built-in-themes">Using built-in themes</h3>
<p>There are several built-in themes in Shiny, which allow you to quickly change the appearance of your app. You can browse a gallery of available themes here <a href="https://rstudio.github.io/shinythemes/">here</a>, or test themes out interactively <a href="https://shiny.rstudio.com/gallery/shiny-theme-selector.html">here</a>.</p>
<p>Let’s try the <em>darkly</em> theme on our Shiny app. To do this, we will need the <code>shinythemes</code> package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rstudio.github.io/shinythemes/'>shinythemes</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We can change the theme of our previous app with one line of code:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Define UI for application that makes a table andplots the Volcano Explosivity </span>
<span class='co'># Index for the most eruptive volcanoes within a selected range of years</span>

<span class='va'>ui</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html'>fluidPage</a></span><span class='op'>(</span>
  
  <span class='co'># Application title ----</span>
  
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/titlePanel.html'>titlePanel</a></span><span class='op'>(</span><span class='st'>"Exploring volcano explosivity"</span><span class='op'>)</span>,
  
  <span class='co'># Input interface ----</span>
  
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>sidebarLayout</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>sidebarPanel</a></span><span class='op'>(</span>
      
      <span class='co'># Sidebar with a slider range input</span>
      <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sliderInput.html'>sliderInput</a></span><span class='op'>(</span><span class='st'>"years"</span>, <span class='co'># the id your server needs to use the selected value</span>
                  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/builder.html'>h3</a></span><span class='op'>(</span><span class='st'>"Years"</span><span class='op'>)</span>,
                  min <span class='op'>=</span> <span class='fl'>1900</span>, max <span class='op'>=</span> <span class='fl'>2020</span>, <span class='co'># maximum range that can be selected</span>
                  value <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2010</span>, <span class='fl'>2020</span><span class='op'>)</span> <span class='co'># this is the default slider position</span>
      <span class='op'>)</span>
    <span class='op'>)</span>
  <span class='op'>)</span>,
  
  <span class='co'># Show the outputs from the server ---------------</span>
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>mainPanel</a></span><span class='op'>(</span>
    
    <span class='co'># Show a ridgeplot of explosivity index for selected volcanoes</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/plotOutput.html'>plotOutput</a></span><span class='op'>(</span><span class='st'>"ridgePlot"</span><span class='op'>)</span>,
    
    <span class='co'># then, show the table we made in the previous step</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/tableOutput.html'>tableOutput</a></span><span class='op'>(</span><span class='st'>"erupt_table"</span><span class='op'>)</span>
    
  <span class='op'>)</span>,
  
  <span class='co'># Customize the theme ----------------------</span>
  
  <span class='co'># Use the darkly theme</span>
  theme <span class='op'>=</span> <span class='fu'>shinythemes</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinythemes/man/shinytheme.html'>shinytheme</a></span><span class='op'>(</span><span class='st'>"darkly"</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Now, if we run the app, it looks a little different:</p>
<p><img src="images/darklytheme.png" /></p>
<h3 id="using-a-custom-theme">Using a custom theme</h3>
<p>You can also go beyond the built-in themes, and create your own custom theme with the fonts and colours of your choice. You can also apply this theme to the outputs rendered in the app, to bring all the visuals together for a more cohesive look.</p>
<h4 id="customizing-a-theme">Customizing a theme</h4>
<p>To create a custom theme, we will be using the <code>bs_theme()</code> function from the <code>bslib</code> package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rstudio.github.io/bslib/'>bslib</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Create a custom theme </span>
<span class='va'>cute_theme</span> <span class='op'>&lt;-</span> <span class='fu'>bslib</span><span class='fu'>::</span><span class='fu'><a href='https://rstudio.github.io/bslib/reference/bs_theme.html'>bs_theme</a></span><span class='op'>(</span>
  
  bg <span class='op'>=</span> <span class='st'>"#36393B"</span>, <span class='co'># background colour</span>
  fg <span class='op'>=</span> <span class='st'>"#FFD166"</span>, <span class='co'># most of the text on your app</span>
  primary <span class='op'>=</span> <span class='st'>"#F26430"</span>, <span class='co'># buttons, ...</span>
  
  <span class='co'># you can also choose fonts</span>
  base_font <span class='op'>=</span> <span class='fu'><a href='https://rstudio.github.io/bslib/reference/font_face.html'>font_google</a></span><span class='op'>(</span><span class='st'>"Open Sans"</span><span class='op'>)</span>,
  heading_font <span class='op'>=</span> <span class='fu'><a href='https://rstudio.github.io/bslib/reference/font_face.html'>font_google</a></span><span class='op'>(</span><span class='st'>"Open Sans"</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p>To apply this theme to our Shiny app (and the outputs), we will be using the <code>thematic</code> package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rstudio.github.io/thematic/'>thematic</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>There are two essential steps to apply a custom theme to a Shiny app:</p>
<ol type="1">
<li>Activating thematic.</li>
<li>Setting the user interface’s theme to the custom theme (<code>cute_theme</code>).</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Activate thematic</span>
<span class='co'># so your R outputs will be changed to match up with your chosen styling</span>
<span class='fu'>thematic</span><span class='fu'>::</span><span class='fu'><a href='https://rstudio.github.io/thematic/reference/thematic_on.html'>thematic_shiny</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='co'># Define UI for application that makes a table andplots the Volcano Explosivity </span>
<span class='co'># Index for the most eruptive volcanoes within a selected range of years</span>

<span class='va'>ui</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html'>fluidPage</a></span><span class='op'>(</span>
  
  <span class='co'># Application title ----</span>
  
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/titlePanel.html'>titlePanel</a></span><span class='op'>(</span><span class='st'>"Exploring volcano explosivity"</span><span class='op'>)</span>,
  
  <span class='co'># Input interface ----</span>
  
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>sidebarLayout</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>sidebarPanel</a></span><span class='op'>(</span>
      
      <span class='co'># Sidebar with a slider range input</span>
      <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sliderInput.html'>sliderInput</a></span><span class='op'>(</span><span class='st'>"years"</span>, <span class='co'># the id your server needs to use the selected value</span>
                  label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/builder.html'>h3</a></span><span class='op'>(</span><span class='st'>"Years"</span><span class='op'>)</span>,
                  min <span class='op'>=</span> <span class='fl'>1900</span>, max <span class='op'>=</span> <span class='fl'>2020</span>, <span class='co'># maximum range that can be selected</span>
                  value <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2010</span>, <span class='fl'>2020</span><span class='op'>)</span> <span class='co'># this is the default slider position</span>
      <span class='op'>)</span>
    <span class='op'>)</span>
  <span class='op'>)</span>,
  
  <span class='co'># Show the outputs from the server ---------------</span>
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>mainPanel</a></span><span class='op'>(</span>
    
    <span class='co'># Show a ridgeplot of explosivity index for selected volcanoes</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/plotOutput.html'>plotOutput</a></span><span class='op'>(</span><span class='st'>"ridgePlot"</span><span class='op'>)</span>,
    
    <span class='co'># then, show the table we made in the previous step</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/tableOutput.html'>tableOutput</a></span><span class='op'>(</span><span class='st'>"erupt_table"</span><span class='op'>)</span>
    
  <span class='op'>)</span>,
  
  <span class='co'># Customize the theme ----------------------</span>
  
  <span class='co'># Use our custom theme</span>
  theme <span class='op'>=</span> <span class='va'>cute_theme</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Now, if we run the app, the user interface and plot theme is set to the colours and fonts we set in <code>cute_theme</code>:</p>
<p><img src="images/thematic.png" /></p>
<p>Here, <code>thematic</code> is not changing the colours used to represent a variable in our plot, because this is an informative colour scale (unlike the colour of axis labels, lines, and the plot background). However, if we remove this colour variable in our ridgeplot in the server, thematic will change the plot colours as well. Here is a simplified example of our server to see what these changes would look like:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Define server logic required to make your output(s)</span>
<span class='va'>server</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>output</span><span class='op'>)</span> <span class='op'>{</span>
  
  <span class='co'>#... (all the good stuff we wrote above)</span>
  
  <span class='co'># render the plot output</span>
  <span class='va'>output</span><span class='op'>$</span><span class='va'>ridgePlot</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/renderPlot.html'>renderPlot</a></span><span class='op'>(</span><span class='op'>{</span>
    
    <span class='co'># create the plot</span>
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'>eruptions_filtered</span><span class='op'>(</span><span class='op'>)</span>,
           <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>vei</span>,
               y <span class='op'>=</span> <span class='va'>volcano_name</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># we are no longer setting </span>
             <span class='co'># the fill argument to a variable</span>
             
             <span class='co'># we are using a ridgeplot geom here, from the ggridges package</span>
             <span class='fu'><a href='https://wilkelab.org/ggridges/reference/geom_density_ridges.html'>geom_density_ridges</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span> 
             
             <span class='co'># label the axes</span>
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Volcano Explosivity Index"</span>, y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
             
             <span class='co'># remove the "classic" ggplot2 so it doesn't override thematic's changes</span>
             <span class='co'># theme_classic() + </span>
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span>,
                   axis.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>12</span>, face <span class='op'>=</span> <span class='st'>"bold"</span><span class='op'>)</span>,
                   axis.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>14</span>, face <span class='op'>=</span> <span class='st'>"bold"</span><span class='op'>)</span><span class='op'>)</span>
           <span class='op'>}</span><span class='op'>)</span>
    <span class='op'>}</span>
</code></pre>
</div>
</div>
<p>Now, our plot’s theme follows the app’s custom theme as well:</p>
<p><img src="images/thematic_plot.png" /></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<h1 id="constructing-an-app">Constructing an App</h1>
<h2 id="taking-advantage-of-good-defaults">Taking advantage of good defaults</h2>
<p>Here, we will use shiny extension <code>shinyDashboards</code> and <code>leaflet</code> to construct a custom Shiny App to map volcanoes of the world. First, we need a few additional packages.</p>
<p><strong>Note: All Source code for this app can be found <a href="https://github.com/bios2/shiny_day_2/tree/main/Jake_volcano_map/Volcano_Leaflet">here</a> on the BIOS2 Github.</strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># load packages</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://shiny.rstudio.com'>shiny</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://rstudio.github.io/shinydashboard/'>shinydashboard</a></span><span class='op'>)</span>  <span class='co'># dashboard layout package</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/dreamRs/shinyWidgets'>shinyWidgets</a></span><span class='op'>)</span>  <span class='co'># fancy widgets package</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rstudio.github.io/leaflet/'>leaflet</a></span><span class='op'>)</span>  <span class='co'># interactive maps package</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="using-shinydashboard">Using ShinyDashboard</h3>
<p>We will create our app using defaults from the ShinyDashboard package, which always includes three main components: a header, using <code>dashboardHeader()</code>, a sidebar, using <code>dashboardSidebar()</code>, and a body, using <code>dashboardBody()</code>. These are then added together using the <code>dashboardPage()</code> function.</p>
<p>Building these elements is less like usual R coding, and more like web design, since we are, in fact, designing a unser interface for a web app. Here, we’ll make a basic layout before populating it.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create the header of our app</span>
<span class='va'>header</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/dashboardHeader.html'>dashboardHeader</a></span><span class='op'>(</span>
    title <span class='op'>=</span> <span class='st'>"Exploring Volcanoes of the World"</span>,
    titleWidth <span class='op'>=</span> <span class='fl'>350</span> <span class='co'># since we have a long title, we need to extend width element in pixels</span>
<span class='op'>)</span>


<span class='co'># create dashboard body - this is the major UI element</span>
<span class='va'>body</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/dashboardBody.html'>dashboardBody</a></span><span class='op'>(</span>

    <span class='co'># make first row of elements (actually, this will be the only row)</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html'>fluidRow</a></span><span class='op'>(</span>
        
        <span class='co'># make first column, 25% of page - width = 3 of 12 columns</span>
        <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/column.html'>column</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>3</span>,
               
               
               <span class='co'># Box 1: text explaining what this app is</span>
               <span class='co'>#-----------------------------------------------</span>
               <span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/box.html'>box</a></span><span class='op'>(</span> width <span class='op'>=</span> <span class='cn'>NULL</span>,
                    status<span class='op'>=</span><span class='st'>"primary"</span>, <span class='co'># this line can change the automatic color of the box.</span>
                    title <span class='op'>=</span> <span class='cn'>NULL</span>,
                    <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/builder.html'>p</a></span><span class='op'>(</span><span class='st'>"here, we'll include some info about this app"</span><span class='op'>)</span>

                 
               <span class='op'>)</span>, <span class='co'># end box 1</span>
               
               
               <span class='co'># box 2 : input for selecting volcano type</span>
               <span class='co'>#-----------------------------------------------</span>
               <span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/box.html'>box</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='cn'>NULL</span>, status <span class='op'>=</span> <span class='st'>"primary"</span>,
                   title  <span class='op'>=</span> <span class='st'>"Selection Criteria"</span>, solidHeader <span class='op'>=</span> <span class='cn'>T</span>, 
                   
                   <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/builder.html'>p</a></span><span class='op'>(</span><span class='st'>"here, we'll add a UI element for selecting volcano types"</span><span class='op'>)</span>,

               <span class='op'>)</span>, <span class='co'># end box 2</span>
               
               
               
               <span class='co'># box 3: ggplot of selected volcanoes by continent</span>
               <span class='co'>#------------------------------------------------</span>
               <span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/box.html'>box</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='cn'>NULL</span>, status <span class='op'>=</span> <span class='st'>"primary"</span>,
                   solidHeader <span class='op'>=</span> <span class='cn'>TRUE</span>, collapsible <span class='op'>=</span> <span class='cn'>T</span>,
                   title <span class='op'>=</span> <span class='st'>"Volcanoes by Continent"</span>,
                   <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/builder.html'>p</a></span><span class='op'>(</span><span class='st'>"here, we'll add a bar plot of volcanoes in each continent"</span><span class='op'>)</span>
               <span class='op'>)</span> <span class='co'># end box 3</span>
               
        <span class='op'>)</span>, <span class='co'># end column 1</span>
         
        <span class='co'># second column - 75% of page (9 of 12 columns)</span>
        <span class='co'>#--------------------------------------------------</span>
        <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/column.html'>column</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>9</span>,
               <span class='co'># Box 4: leaflet map</span>
               <span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/box.html'>box</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='cn'>NULL</span>, background <span class='op'>=</span> <span class='st'>"light-blue"</span>, height <span class='op'>=</span> <span class='fl'>850</span>,
                   <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/builder.html'>p</a></span><span class='op'>(</span><span class='st'>"here, we'll show volcanoes on a map"</span><span class='op'>)</span>,
               <span class='op'>)</span> <span class='co'># end box with map</span>
        <span class='op'>)</span> <span class='co'># end second column</span>
        
    <span class='op'>)</span> <span class='co'># end fluidrow</span>
<span class='op'>)</span> <span class='co'># end body</span>


<span class='co'># add elements together</span>
<span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/dashboardPage.html'>dashboardPage</a></span><span class='op'>(</span>
    skin <span class='op'>=</span> <span class='st'>"blue"</span>,
    header <span class='op'>=</span> <span class='va'>header</span>,
    sidebar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/dashboardSidebar.html'>dashboardSidebar</a></span><span class='op'>(</span>disable <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, <span class='co'># here, we only have one tab of our app, so we don't need a sidebar</span>
    body <span class='op'>=</span> <span class='va'>body</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="images/shiny_dashboard_layout.png" /></p>
<h2 id="populating-the-layout">Populating the Layout</h2>
<p>Now, we are going to fill out app with elements. In this app, we will only have one user input: a selection of the volcano type to show. We will use this input (<code>input$volcano_type</code>), which will be used to filter data in the server (i.e. make a smaller dataset using only volcanoes of the selected types), then use this filtered dataset to create output elements (plots and maps).</p>
<p>Below, we show the necessary code to include in both the UI and the Server to create each plot element. Notice that after the reactive value <code>selected_volcanoes</code> is created in the selection box, this is the only object that is used to create the other elements in the app.</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 18%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Location</th>
<th style="text-align: left;">Element</th>
<th style="text-align: left;">UI</th>
<th style="text-align: left;">Server</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Box 1</td>
<td style="text-align: left;"><strong>Intro Textbox</strong></td>
<td style="text-align: left;">Markdown/HTML text code</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Box 2</td>
<td style="text-align: left;"><strong>Selection Wigets</strong></td>
<td style="text-align: left;"><code>checkboxGroupButtons(</code> <code>inputID = "volcano_type")</code></td>
<td style="text-align: left;"><code>selected_volcanoes &lt;- reactive({</code> <code>volcano_df %&gt;% filter(type %in% input$volcano_type)})</code> to create a filtered dataset that will react to user input</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Box 3</td>
<td style="text-align: left;"><strong>Bar Graph</strong></td>
<td style="text-align: left;"><code>plotOutput("bargraph")</code></td>
<td style="text-align: left;"><code>output$continentplot &lt;- renderPlot(...))</code> which will plot from the <code>selectied_volcanoes</code> reactive object</td>
</tr>
<tr class="even">
<td style="text-align: left;">Box 4</td>
<td style="text-align: left;"><strong>Leaflet Map</strong></td>
<td style="text-align: left;"><code>leafletOutput("volcanomap")</code></td>
<td style="text-align: left;"><code>output$volcanomap &lt;- renderLeaflet(...)</code> to map points from the <code>selectied_volcanoes</code> reactive object</td>
</tr>
</tbody>
</table>
<p><img src="images/populated_shiny.png" /></p>
<h2 id="challenge">Challenge!</h2>
<p>Use the code provided to add your own additional user input to the Shiny App. The code (which you can access <a href="https://github.com/bios2/shiny_day_2/tree/main/Jake_volcano_map/Volcano_Leaflet">here</a> leaves a space for an additional UI input inside box 2). Then, you’ll need to use your new input element to the reactive value in the Server, as noted in the server code.</p>
<p>Use the <a href="https://shiny.rstudio.com/gallery/widget-gallery.html">Default Shiny Widgets</a> or <a href="http://shinyapps.dreamrs.fr/shinyWidgets/">shinyWidgets extended package</a> galleries to explore the types of elements you can add.</p>
<p><img src="images/add_elements_diagram.png" /></p>
<h2 id="see-our-completed-app-here">See our completed app <a href="https://jakelawlor.shinyapps.io/Volcanoes_of_the_World/">HERE</a></h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<h2 id="why-do-you-want-to-use-shiny">Why do you want to use Shiny?</h2>
<p>There are many reasons to consider using Shiny for a project:</p>
<ul>
<li>sharing results from a paper with your readers</li>
<li>helping you explore a model, mathematics, simulations</li>
<li>letting non R users use R.</li>
</ul>
<h2 id="hello-shiny">Hello Shiny</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Define UI for app that draws a histogram ----</span>
<span class='va'>ui</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html'>fluidPage</a></span><span class='op'>(</span>

  <span class='co'># App title ----</span>
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/titlePanel.html'>titlePanel</a></span><span class='op'>(</span><span class='st'>"Hello Shiny!"</span><span class='op'>)</span>,

  <span class='co'># Sidebar layout with input and output definitions ----</span>
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>sidebarLayout</a></span><span class='op'>(</span>

    <span class='co'># Sidebar panel for inputs ----</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>sidebarPanel</a></span><span class='op'>(</span>

      <span class='co'># Input: Slider for the number of bins ----</span>
      <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sliderInput.html'>sliderInput</a></span><span class='op'>(</span>inputId <span class='op'>=</span> <span class='st'>"bins"</span>,
                  label <span class='op'>=</span> <span class='st'>"Number of bins:"</span>,
                  min <span class='op'>=</span> <span class='fl'>1</span>,
                  max <span class='op'>=</span> <span class='fl'>50</span>,
                  value <span class='op'>=</span> <span class='fl'>30</span><span class='op'>)</span>

    <span class='op'>)</span>,

    <span class='co'># Main panel for displaying outputs ----</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/sidebarLayout.html'>mainPanel</a></span><span class='op'>(</span>

      <span class='co'># Output: Histogram ----</span>
      <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/plotOutput.html'>plotOutput</a></span><span class='op'>(</span>outputId <span class='op'>=</span> <span class='st'>"distPlot"</span><span class='op'>)</span>

    <span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="golem">Golem</h3>
<p>First step is creating your own golem project:</p>
<p><img src="Capture%20d%E2%80%99%C3%A9cran,%20le%202021-06-23%20%C3%A0%2005.25.32.png" /></p>
<p>golem provides you with some very helpful “workflow” scripts:</p>
<p>Edit the Description by filling in this function in <code>01_dev.R</code></p>
<p>Then, add all the dependencies</p>
<p>Together, this edits the <code>DESCRIPTION</code> of your R package to look something like this:</p>
<p>Now we can start building the app.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>app_ui</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>request</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/tag.html'>tagList</a></span><span class='op'>(</span>
    <span class='co'># Leave this function for adding external resources</span>
    <span class='fu'>golem_add_external_resources</span><span class='op'>(</span><span class='op'>)</span>,
    <span class='co'># Your application UI logic </span>
    <span class='fu'>shinydashboard</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/dashboardPage.html'>dashboardPage</a></span><span class='op'>(</span>
      header <span class='op'>=</span> <span class='fu'>shinydashboard</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/dashboardHeader.html'>dashboardHeader</a></span><span class='op'>(</span>
        title <span class='op'>=</span> <span class='st'>"Exploring Volcanoes of the World"</span>,
        titleWidth <span class='op'>=</span> <span class='fl'>350</span> <span class='co'># since we have a long title, we need to extend width element in pixels</span>
      <span class='op'>)</span>,
      sidebar <span class='op'>=</span> <span class='fu'>shinydashboard</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/dashboardSidebar.html'>dashboardSidebar</a></span><span class='op'>(</span>disable <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, <span class='co'># here, we only have one tab, so we don't need a sidebar</span>
      body <span class='op'>=</span> <span class='fu'>shinydashboard</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/dashboardBody.html'>dashboardBody</a></span><span class='op'>(</span>
        <span class='co'># make first row of elements (actually, this will be the only row)</span>
        <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html'>fluidRow</a></span><span class='op'>(</span>
          <span class='co'># make first column, 25% of page - width = 3 of 12 colums</span>
          <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/column.html'>column</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>3</span>,
                 <span class='co'># box 1 : input for selecting volcano type</span>
                 <span class='co'>#-----------------------------------------------</span>
                 <span class='fu'>shinydashboard</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/box.html'>box</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='cn'>NULL</span>, status <span class='op'>=</span> <span class='st'>"primary"</span>,
                     title  <span class='op'>=</span> <span class='st'>"Selection Criteria"</span>, solidHeader <span class='op'>=</span> <span class='cn'>T</span>
                     
                     <span class='co'>## CHECKBOX HERE</span>
                     
                 <span class='op'>)</span>, <span class='co'># end box 1</span>
                 <span class='co'># box 2: ggplot of selected volcanoes by continent</span>
                 <span class='co'>#------------------------------------------------</span>
                 <span class='fu'>shinydashboard</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/box.html'>box</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='cn'>NULL</span>, status <span class='op'>=</span> <span class='st'>"primary"</span>,
                     solidHeader <span class='op'>=</span> <span class='cn'>TRUE</span>, collapsible <span class='op'>=</span> <span class='cn'>T</span>,
                     title <span class='op'>=</span> <span class='st'>"Volcanoes by Continent"</span>
                     
                     <span class='co'>## PLOT HERE</span>

                 <span class='op'>)</span> <span class='co'># end box 2</span>
          <span class='op'>)</span>, <span class='co'># end column 1</span>
          
          <span class='co'># second column - 75% of page (9 of 12 columns)</span>
          <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/column.html'>column</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>9</span>,
                 
                 <span class='co'># Box 3: leaflet map</span>
                 <span class='fu'>shinydashboard</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinydashboard/man/box.html'>box</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='cn'>NULL</span>, background <span class='op'>=</span> <span class='st'>"light-blue"</span>
                                     
                                     <span class='co'>## MAP HERE </span>
                                     
                 <span class='op'>)</span> <span class='co'># end box with map</span>
          <span class='op'>)</span> <span class='co'># end second column</span>
        <span class='op'>)</span> <span class='co'># end fluidrow</span>
      <span class='op'>)</span> <span class='co'># end body</span>
    <span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>This indicates where each of the three components of the app would go.</p>
<p>At this point we can run the app to get a very empty-looking UI:</p>
<p><img src="Capture%20d%E2%80%99%C3%A9cran,%20le%202021-06-23%20%C3%A0%2005.58.08.png" /></p>
<h3 id="golem-modules">Golem modules</h3>
<p>We could split this app into three different sections, corresponding to each of the three boxes:</p>
<ol type="1">
<li>Filter the type of volcano we see</li>
<li>take the filtered volcanoes and plot a stacked bar chart</li>
<li>take the filtered volcanoes and plot a map</li>
</ol>
<h3 id="selecting-the-volcanoes">Selecting the volcanoes</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#' volcano_select UI Function</span>
<span class='co'>#'</span>
<span class='co'>#' @description A shiny Module.</span>
<span class='co'>#'</span>
<span class='co'>#' @param id,input,output,session Internal parameters for {shiny}.</span>
<span class='co'>#'</span>
<span class='co'>#' @noRd </span>
<span class='co'>#'</span>
<span class='co'>#' @importFrom shiny NS tagList </span>
<span class='va'>mod_volcano_select_ui</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>ns</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/NS.html'>NS</a></span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/tag.html'>tagList</a></span><span class='op'>(</span>
    <span class='co'># Widget specifying the species to be included on the plot</span>
    <span class='fu'>shinyWidgets</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shinyWidgets/man/checkboxGroupButtons.html'>checkboxGroupButtons</a></span><span class='op'>(</span>
      inputId <span class='op'>=</span> <span class='fu'>ns</span><span class='op'>(</span><span class='st'>"volcano_type"</span><span class='op'>)</span>,
      label <span class='op'>=</span> <span class='st'>"Volcano Type"</span>,
      choices <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Stratovolcano"</span> , <span class='st'>"Shield"</span> ,<span class='st'>"Cone"</span> ,   <span class='st'>"Caldera"</span> ,    <span class='st'>"Volcanic Field"</span>,
                  <span class='st'>"Complex"</span> , <span class='st'>"Other"</span>,   <span class='st'>"Lava Dome"</span>  , <span class='st'>"Submarine"</span>    <span class='op'>)</span>,
      checkIcon <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
        yes <span class='op'>=</span> <span class='va'>tags</span><span class='op'>$</span><span class='fu'>i</span><span class='op'>(</span>class <span class='op'>=</span> <span class='st'>"fa fa-check-square"</span>, 
                     style <span class='op'>=</span> <span class='st'>"color: steelblue"</span><span class='op'>)</span>,
        no <span class='op'>=</span> <span class='va'>tags</span><span class='op'>$</span><span class='fu'>i</span><span class='op'>(</span>class <span class='op'>=</span> <span class='st'>"fa fa-square-o"</span>, 
                    style <span class='op'>=</span> <span class='st'>"color: steelblue"</span><span class='op'>)</span><span class='op'>)</span>
    <span class='op'>)</span> <span class='co'># end checkboxGroupButtons</span>
  <span class='op'>)</span>
<span class='op'>}</span>
    
<span class='co'>#' volcano_select Server Functions</span>
<span class='co'>#'</span>
<span class='co'>#' @noRd </span>
<span class='va'>mod_volcano_select_server</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>volcano</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/moduleServer.html'>moduleServer</a></span><span class='op'>(</span> <span class='va'>id</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>output</span>, <span class='va'>session</span><span class='op'>)</span><span class='op'>{</span>
    <span class='va'>ns</span> <span class='op'>&lt;-</span> <span class='va'>session</span><span class='op'>$</span><span class='va'>ns</span>
    
    <span class='co'># make reactive dataset</span>
    <span class='co'># ------------------------------------------------</span>
    <span class='co'># Make a subset of the data as a reactive value</span>
    <span class='co'># this subset pulls volcano rows only in the selected types of volcano</span>
    <span class='va'>selected_volcanoes</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/reactive.html'>reactive</a></span><span class='op'>(</span><span class='op'>{</span>
      
      <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/req.html'>req</a></span><span class='op'>(</span><span class='va'>input</span><span class='op'>$</span><span class='va'>volcano_type</span><span class='op'>)</span>
      
      <span class='va'>volcano</span> <span class='op'>%&gt;%</span>
        
        <span class='co'># select only volcanoes in the selected volcano type (by checkboxes in the UI)</span>
        <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>volcano_type_consolidated</span> <span class='op'>%in%</span> <span class='va'>input</span><span class='op'>$</span><span class='va'>volcano_type</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
        <span class='co'># Space to add your suggested filter here!! </span>
        <span class='co'># --- --- --- --- --- --- --- --- --- --- --- --- ---</span>
        <span class='co'># filter() %&gt;%</span>
        <span class='co'># --- --- --- --- --- --- --- --- --- --- --- --- ---</span>
        <span class='co'># change volcano type into factor (this makes plotting it more consistent)</span>
        <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>volcano_type_consolidated <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>volcano_type_consolidated</span>,
                                                  levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Stratovolcano"</span> , <span class='st'>"Shield"</span>,  <span class='st'>"Cone"</span>,   <span class='st'>"Caldera"</span>, <span class='st'>"Volcanic Field"</span>,
                                                             <span class='st'>"Complex"</span> ,  <span class='st'>"Other"</span> ,  <span class='st'>"Lava Dome"</span> , <span class='st'>"Submarine"</span> <span class='op'>)</span> <span class='op'>)</span> <span class='op'>)</span>
    <span class='op'>}</span><span class='op'>)</span>
    
  <span class='op'>}</span><span class='op'>)</span>
<span class='op'>}</span>
    
<span class='co'>## To be copied in the UI</span>
<span class='co'># mod_volcano_select_ui("volcano_select_1")</span>
    
<span class='co'>## To be copied in the server</span>
<span class='co'># mod_volcano_select_server("volcano_select_1")</span>
</code></pre>
</div>
</div>
<p>I also like to test my modules by using them to create a toy Shiny app. The best place to do this is by using a testthat directory. This is another great advantage of using a package workflow. You can set this up easily with <code>usethis::use_test()</code>: just run <code>usethis::use_test</code> from the R console when you have the module open.</p>
<p>Then write a simple test like this</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>test_that</span><span class='op'>(</span><span class='st'>"volcano selection module works"</span>, <span class='op'>{</span>
  
  <span class='fu'>testthat</span><span class='fu'>::</span><span class='fu'><a href='https://testthat.r-lib.org/reference/skip.html'>skip_if_not</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
  
  
  <span class='va'>ui</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html'>fluidPage</a></span><span class='op'>(</span>
  <span class='co'>## To be copied in the UI</span>
  <span class='fu'>mod_volcano_select_ui</span><span class='op'>(</span><span class='st'>"volcano_select_1"</span><span class='op'>)</span>,
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/tableOutput.html'>tableOutput</a></span><span class='op'>(</span><span class='st'>"table"</span><span class='op'>)</span>
  <span class='op'>)</span>
  
  <span class='va'>server</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>output</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='co'>## To be copied in the server</span>
    <span class='va'>volcano_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/readRDS.html'>readRDS</a></span><span class='op'>(</span><span class='st'>"data/volcanoes.rds"</span><span class='op'>)</span>
    <span class='va'>selected_data</span> <span class='op'>&lt;-</span> <span class='fu'>mod_volcano_select_server</span><span class='op'>(</span><span class='st'>"volcano_select_1"</span>,
                                               volcano <span class='op'>=</span> <span class='va'>volcano_data</span><span class='op'>)</span>
    
    <span class='va'>output</span><span class='op'>$</span><span class='va'>table</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/renderTable.html'>renderTable</a></span><span class='op'>(</span><span class='fu'>selected_data</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span>
  
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html'>shinyApp</a></span><span class='op'>(</span>ui <span class='op'>=</span> <span class='va'>ui</span>, server <span class='op'>=</span> <span class='va'>server</span><span class='op'>)</span>
  
<span class='op'>}</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Which generates the following simple app:</p>
<p><img src="Capture%20d%E2%80%99%C3%A9cran,%20le%202021-06-23%20%C3%A0%2006.25.38.png" /></p>
<h3 id="barplot-of-continents">Barplot of continents</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#' continentplot UI Function</span>
<span class='co'>#'</span>
<span class='co'>#' @description A shiny Module.</span>
<span class='co'>#'</span>
<span class='co'>#' @param id,input,output,session Internal parameters for {shiny}.</span>
<span class='co'>#'</span>
<span class='co'>#' @noRd </span>
<span class='co'>#'</span>
<span class='co'>#' @importFrom shiny NS tagList </span>
<span class='va'>mod_continentplot_ui</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>ns</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/NS.html'>NS</a></span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/tag.html'>tagList</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/plotOutput.html'>plotOutput</a></span><span class='op'>(</span><span class='fu'>ns</span><span class='op'>(</span><span class='st'>"barplot"</span><span class='op'>)</span>, <span class='co'># this calls to object continentplot that is made in the server page</span>
               height <span class='op'>=</span> <span class='fl'>350</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>}</span>
    
<span class='co'>#' continentplot Server Functions</span>
<span class='co'>#'</span>
<span class='co'>#' @noRd </span>
<span class='va'>mod_continentplot_server</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>volcano</span>, <span class='va'>selected_volcanoes</span><span class='op'>)</span><span class='op'>{</span>
  
  <span class='co'># kind of helpful</span>
  <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/reactive.html'>is.reactive</a></span><span class='op'>(</span><span class='va'>selected_volcanoes</span><span class='op'>)</span><span class='op'>)</span>
  
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/moduleServer.html'>moduleServer</a></span><span class='op'>(</span> <span class='va'>id</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>output</span>, <span class='va'>session</span><span class='op'>)</span><span class='op'>{</span>
    <span class='va'>ns</span> <span class='op'>&lt;-</span> <span class='va'>session</span><span class='op'>$</span><span class='va'>ns</span>
 
    <span class='va'>output</span><span class='op'>$</span><span class='va'>barplot</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/renderPlot.html'>renderPlot</a></span><span class='op'>(</span><span class='op'>{</span>
      
      <span class='co'># create basic barplot</span>
      <span class='va'>barplot</span> <span class='op'>&lt;-</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>volcano</span>,
                                 <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>continent</span>,
                            fill <span class='op'>=</span> <span class='va'>volcano_type_consolidated</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
        <span class='co'># update theme and axis labels:</span>
        <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_bw</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span>
        <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>plot.background  <span class='op'>=</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>color<span class='op'>=</span><span class='st'>"transparent"</span>,fill <span class='op'>=</span> <span class='st'>"transparent"</span><span class='op'>)</span>,
                       panel.background <span class='op'>=</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>color<span class='op'>=</span><span class='st'>"transparent"</span>,fill<span class='op'>=</span><span class='st'>"transparent"</span><span class='op'>)</span>,
                       panel.border     <span class='op'>=</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>color<span class='op'>=</span><span class='st'>"transparent"</span>,fill<span class='op'>=</span><span class='st'>"transparent"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
        <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>x<span class='op'>=</span><span class='cn'>NULL</span>, y<span class='op'>=</span><span class='cn'>NULL</span>, title <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span> <span class='op'>+</span>
        <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>angle<span class='op'>=</span><span class='fl'>45</span>,hjust<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
      
      
      <span class='co'># IF a selected_volcanoes() object exists, update the blank ggplot. </span>
      <span class='co'># basically this makes it not mess up when nothing is selected</span>
      
      <span class='va'>barplot</span> <span class='op'>&lt;-</span> <span class='va'>barplot</span> <span class='op'>+</span>
        <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'>selected_volcanoes</span><span class='op'>(</span><span class='op'>)</span>, show.legend <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span> <span class='op'>+</span>
        <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'>RColorBrewer</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html'>brewer.pal</a></span><span class='op'>(</span><span class='fl'>9</span>,<span class='st'>"Set1"</span><span class='op'>)</span>, drop<span class='op'>=</span><span class='cn'>F</span><span class='op'>)</span> <span class='op'>+</span>
        <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_x_discrete</a></span><span class='op'>(</span>drop<span class='op'>=</span><span class='cn'>F</span><span class='op'>)</span>
      
      
      <span class='co'># print the plot</span>
      <span class='va'>barplot</span>
      
    <span class='op'>}</span><span class='op'>)</span> <span class='co'># end renderplot command</span>
    
    
  <span class='op'>}</span><span class='op'>)</span>
<span class='op'>}</span>
    
<span class='co'>## To be copied in the UI</span>
<span class='co'># mod_continentplot_ui("continentplot_1")</span>
    
<span class='co'>## To be copied in the server</span>
<span class='co'># mod_continentplot_server("continentplot_1")</span>
</code></pre>
</div>
</div>
<p>the test</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>test_that</span><span class='op'>(</span><span class='st'>"volano barplot works"</span>, <span class='op'>{</span>
  
  <span class='fu'>testthat</span><span class='fu'>::</span><span class='fu'><a href='https://testthat.r-lib.org/reference/skip.html'>skip_if_not</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
  
  
  <span class='va'>ui</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html'>fluidPage</a></span><span class='op'>(</span>
    <span class='co'>## To be copied in the UI</span>
    <span class='fu'>mod_continentplot_ui</span><span class='op'>(</span><span class='st'>"continentplot_1"</span><span class='op'>)</span>,
    <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/tableOutput.html'>tableOutput</a></span><span class='op'>(</span><span class='st'>"table"</span><span class='op'>)</span>
  <span class='op'>)</span>
  
  <span class='va'>server</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>output</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='co'>## To be copied in the server</span>
    <span class='va'>volcano_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/readRDS.html'>readRDS</a></span><span class='op'>(</span><span class='st'>"data/volcanoes.rds"</span><span class='op'>)</span>
    <span class='va'>volcano_recent</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>volcano_data</span>, <span class='va'>last_eruption_year</span> <span class='op'>&gt;</span> <span class='fl'>2000</span><span class='op'>)</span>
    <span class='fu'>mod_continentplot_server</span><span class='op'>(</span><span class='st'>"continentplot_1"</span>,
                                              volcano <span class='op'>=</span> <span class='va'>volcano_data</span>,
                                              selected_volcanoes <span class='op'>=</span> <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/reactive.html'>reactive</a></span><span class='op'>(</span><span class='va'>volcano_recent</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span>
  
  <span class='fu'><a href='https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html'>shinyApp</a></span><span class='op'>(</span>ui <span class='op'>=</span> <span class='va'>ui</span>, server <span class='op'>=</span> <span class='va'>server</span><span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
