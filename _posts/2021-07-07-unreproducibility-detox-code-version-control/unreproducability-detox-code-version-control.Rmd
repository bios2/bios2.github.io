---
title: "(un)Reproducibility Detox - code version control"
description: |
  How do we keep our work reproducible? A focus on package and language 'version control'.
Tanya Strydom
date: 07-07-2021
output:
  distill::distill_article:
    self_contained: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```
# Package management

> First your self care task of the day: Its time to update all those packages (and 
> maybe even language version) - you deserve to be able to play with the newest 
> toys on the block. While all this is happening in the background put 
> your feet up and hit play on your favourite movie.

## Why do we need a package management system?

You've commented, documented, shared, and your code meaning that its available 
to and usable by the rest of the world right? Well maybe for now but you know 
what they say about time - *all hours wound; the last one kills*. Okay so it 
might not be that dramatic for but there is of course the problem that as time 
progresses your code becomes out-dated and (worst case scenario) non-functional. 
Programming languages (and packages) are continually evolving as developers 
work at squashing bugs and making performance upgrades. Sometimes these upgrades 
might result in a fundamental change in how the a language or package function 
e.g. a function name might change or some functionality will be removed in favour 
of another. This means that in a few years that beautifully documented chunk of 
code that you've written today might not even run. Oh dear...

What this boils down to is that we need to not only think about documenting the 
code itself but also all the 'backend' features that make it tick i.e. not only 
what packages we're using but also what version. This can also extend to language 
version and even operating system (OS) type or version. 

Although this may seem daunting it's important to remember that the journey to 
reproducibility is much like how one approaches eating an elephant - we take 
it one bit~~e~~ at a time. With that mantra in mind don't be afraid to take a 
bite but also don't bite off more than you can chew.

## How do we _keep_ our work reproducible?

The good news there are a lot of functionality that we can leverage in our journey 
to reproducibility. Different languages have different ways we can document and 
'keep' the package version that we are using. The main focus will be using `R` as 
it is the current *lingua franca* of most ecologists. It also straddles the middle 
ground between being very 'picky' like `python` and literally having a built in 
system like `Julia`. The (language agnostic) take home message though is that it's 
important to (at minimum) keep record of what versions of things you used if you 
want your work to work a few months/years down the line.

The three main approaches and packages I will discuss are `{groundhog}`, `{renv}` 
and, `docker`. There are of course other ways to document package versions but 
these are (somewhat user friendly) and will give you different 'levels' of 
reproducibility. It is of course also possible to mix and match these different 
platforms.

### {groundhog}

[Groundhog](http://groundhogr.com/using/) is a relatively new kid on the block - 
and apparently refers to a film of the same name (no comment on my side as this 
is a facet of pop culture the eludes me). This is a super easy package to implement 
(think one function easy) and is a really nice way to 'retrofit' some of your 
older code.

**How it works:** Essentially `{groundhog}` will install the version of a package 
that was available on CRAN for a specified date. It does this by 'replacing' the 
`library("package")` with `groundhog.library("package", date)`. This means its 
easy to go back and set a more suitable date for your script e.g. maybe the 
date it was created or last time it was saved.

```{r groundhog, include=TRUE}
# a mini example
install.packages("groundhog")
library("groundhog")
groundhog.library("tidyverse", "2018-07-07")

# you can also call multiple packages
pkgs <- c("tidyverse","ggforce")
groundhog.library(pkgs, "2018-07-07")

# working with an 'active' script
library(groundhog)
groundhogÂ­.day = "2021-07-07"
groundhog.library(pkgs, groundhog.day)

```
**Limitations:** 

### {renv}

Backwards compatibility

**How it works:**

**Limitations:** 

### Docker

OS compatibility

**How it works:**

**Limitations:** 
