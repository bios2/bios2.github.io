<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Optimization</title>
    <meta charset="utf-8" />
    <meta name="author" content="Dominique Gravel" />
    <link href="assets/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="assets/remark-css-0.0.1/hygge.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/ecl707.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: title-slide, middle

&lt;style type="text/css"&gt;
  .title-slide {
    background-image: url('../assets/img/bg.jpg');
    background-color: #23373B;
    background-size: contain;
    border: 0px;
    background-position: 600px 0;
    line-height: 1;
  }
&lt;/style&gt;

# Model evaluation with ecological data

&lt;hr width="65%" align="left" size="0.3" color="orange"&gt;&lt;/hr&gt;

## Optimization. Problem

&lt;hr width="65%" align="left" size="0.3" color="orange" style="margin-bottom:40px;" alt="@Martin Sanchez"&gt;&lt;/hr&gt;

.instructors[
  **ECL707/807** - Dominique Gravel
]

&lt;img src="../assets/img/logo.png" width="25%" style="margin-top:20px;"&gt;&lt;/img&gt;

---

# The complexity-stability problem 

In 1972, Robert May proposed a very influential theorem stating that diverse and complex ecosystems (with many links) should no persist because they would be unstable. He derived his proposition with the investigation of the stability of community matrices (Jacobian matrices) describing the per capita effect of each species on the growth rate of other species. Stability is measured by the real part of the leading eigen value of the Jacobian. The smaller is the eigen value is the more stable is the community. Negative eigenvalues are stable while positive eigen values are unstable. 

More specifically, he proposed a boundary to complexity following the inequality :

$$ \sigma \sqrt{SC} &lt; d $$

where `\(S\)` is species richness, `\(C\)` is connectance, `\(\sigma\)` is the standard deviation of a normal distribution of interaction strength and `\(m\)` is the average intra-specific interaction coefficients. 

---

# Complexity-stability in real ecosystems 

&lt;div style='text-align:center;'&gt;
  &lt;img src="assets/img/jacqueta.png" width="650px"&gt;&lt;/img&gt;
&lt;/div&gt;

---

# Numerical example

.pull-left[


```r
# Create a random matrix
S &lt;- 50
C &lt;- 0.1
sigma = 0.5
L &lt;- matrix(0, nr = S, nc = S)
int &lt;- matrix(rnorm(S^2, mean = 0, 
sd = sigma), nr = S, nc = S)
rand &lt;- matrix(runif(S^2,0,1),
nr=S,nc=S)
L[rand&lt;C] = int[rand&lt;C]
```
]

.pull-right[
    
![](index_files/figure-html/unnamed-chunk-2-1.png)&lt;!-- --&gt;
]

---

# Complexity-stability in real ecosystems 

The problem with May's theory is that the derivation is based on the investigation of random interaction matrices, ie matrices where every species can interact with every other species. That means that all types of interactions are equally feasible and there is a prevalence of asymetric interactions. Real ecosystems are far from random and therefore theoreticians developed several arguments proposing that this organization is promoting stability. 

---

# Complexity-stability in real ecosystems 

&lt;div style='text-align:center;'&gt;
  &lt;img src="assets/img/jacquetb.png" width="650px"&gt;&lt;/img&gt;
&lt;/div&gt;

---

# Complexity-stability in real ecosystems 

&lt;div style='text-align:center;'&gt;
  &lt;img src="assets/img/jacquetc.png" width="750px"&gt;&lt;/img&gt;
&lt;/div&gt;

---

class: inverse, middle, center

# Problem : is there a way we can arrange links in a matrix that would maximize stability ?

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

---

# Instructions

1. Write a function to generate a random matrix for pre-specified `\(S\)` and `\(C\)`
2. Write a function to compute the real part of the largest eigen value of a matrix `\(L\)`
3. Write a function to perform simulated annealing with a matrix `\(L\)` as input and returning an optimized matrix `\(L_{opt}\)` as output
4. Run the optimization procedure for a gradient of species richness and record `\(L\)` and `\(L_{opt}\)`
5. Evaluate if the "potential for stability" ($L-L_{opt}$) relates to complexity
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="../macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "monokai",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
